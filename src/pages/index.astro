---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Gsap Label">
  <div class="counter-wrap">
    <h1 class="counter">0</h1>
    <div class="counter-revealer"></div>
  </div>

  <div class="container">
    <div class="row row-1">
      <div class="design col">
        <div class="item">
          <a href="/modal-popup">Movies Recommendation</a>
        </div>
        <div class="item">
          <a href="/galery">Galery Interactive</a>
        </div>
        <div class="item">
          <a href="/exorcist">The Exorcist</a>
        </div>
        <div class="item">
          <a href="/anatomy">Anatomy of a Fall</a>
        </div>
        <div class="item">
          <a href="/movie-hover">Movie Hover</a>
        </div>
        <div class="item item-tag-1">
          <p>Enzo</p>
        </div>
      </div>
      <div class="dev col">
        <div class="item item-tag-2">
          <p>Bustamante</p>
        </div>
        <div class="item">
          <a href="/suspiria">Suspiria 1977. Draw To Reveal</a>
        </div>
        <div class="item">
          <a href="/shot">Shooting Movies</a>
        </div>
        <div class="item">
          <a href="/carpenter"> John Carpenter</a>
        </div>
        <div class="item">
          <a href="/info">Info</a>
        </div>
      </div>
    </div>
  </div>
  <div class="row row-2">
    <div class="logo">
      <div class="item-main">
        <h1>EB&copy;</h1>
        <div class="item-main-revealer"></div>
      </div>
    </div>
    <div class="arrow">
      <div class="item-main">
        <h1 id="link" data-href="https://github.com/Enzo889/gsap-label">
          &#8600;
        </h1>
        <div class="item-main-revealer"></div>
      </div>
    </div>
  </div>
</Layout>

<style>
  @import url("https://fonts.cdnfonts.com/css/pp-neue-montreal");

  :root {
    --color-bg-index: #0f0f0f;
    --color-text-index: #949f92;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html,
  body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: var(--color-bg-index);
    color: var(--color-text-index);
    font-family: "PP Neue Montreal", sans-serif;
  }

  h1,
  p {
    font-weight: 400;
    line-height: 100%;
  }

  a {
    font-size: 40px;
    text-decoration: none;
    color: var(--color-text-index);
  }

  .container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .row {
    display: flex;
  }

  .row-1 {
    flex: 3;
  }

  .row-2 {
    flex: 2;
  }

  .col {
    width: 50%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 1.5em 10em;
  }

  .item-tag-1 {
    margin-top: 2em;
  }

  .item-tag-2 {
    margin-bottom: 2em;
  }

  .item,
  .item-main,
  .counter-wrap {
    position: relative;
    width: max-content;
    height: max-content;
  }

  .item {
    position: relative;
    top: 40px;
    opacity: 0;
  }

  .item a:hover {
    color: #f7f7f7;
    cursor: pointer;
  }

  .row-2 {
    justify-content: space-between;
    align-items: center;
    padding: 80px 140px;
  }

  .row-2 .item-main h1 {
    position: relative;
    top: -100px;
    font-size: 280px;
    line-height: 90%;
  }

  .item-main-revealer::after {
    content: "";
    position: absolute;
    top: 240px;
    left: 0;
    width: 105%;
    height: 110%;
    background: var(--color-bg-index);
  }

  .counter-wrap {
    position: absolute;
    bottom: 0;
    padding: 80px 60px;
  }

  .counter-wrap h1 {
    position: relative;
    top: 0;
    font-family: "PP Neue Montreal", sans-serif;
    font-size: 300px;
    font-weight: 300;
    line-height: 80%;
  }

  .counter-revealer::after {
    content: "";
    position: absolute;
    top: -350px;
    width: 100%;
    height: 100%;
    background: var(--color-bg-index);
  }

  #link:hover {
    color: #f7f7f7;
    cursor: pointer;
    background: transparent;
  }
</style>

<script>
  import { gsap } from "gsap";

  const linkElement = document.getElementById("link");

  function handleLinkClick() {
    const url = this.getAttribute("data-href");
    window.open(url, "_blank");
  }

  linkElement.addEventListener("click", handleLinkClick);

  function startLoader() {
    let counterElement = document.querySelector(".counter");

    let currentValue = 0;

    function updateCounter() {
      if (currentValue === 100) {
        return;
      }

      currentValue += Math.floor(Math.random() * 10) + 1;

      if (currentValue > 100) {
        currentValue = 100;
      }

      counterElement.textContent = currentValue + "%";

      let delay = Math.floor(Math.random() * 200) + 50;
      setTimeout(updateCounter, delay);
    }

    updateCounter();
  }

  startLoader();

  gsap.to(".counter-wrap h1", 1.5, {
    delay: 3,
    y: -280,
    ease: "power4.inOut",
  });

  gsap.to(".item", 1.5, {
    delay: 3.5,
    y: -40,
    opacity: 1,
    ease: "power4.inOut",
    stagger: {
      amount: 0.5,
    },
  });

  gsap.to(".item-main h1", 1.5, {
    delay: 3.5,
    y: -280,
    ease: "power4.inOut",
    stagger: {
      amount: 0.5,
    },
  });
</script>
